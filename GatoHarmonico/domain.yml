version: "3.1"

intents:
  - saudacao
  - agendamento_aula
  - agendamento_consultoria
  - compra_instrumento
  - listagem_instrumentos
  - materiais
  - despedida
  - pagamento
  - fornecer_dados_pessoais
  - agendamento_hora
  - agendamento_modo
  - EXTERNAL_inactivity_reminder

entities:
  - instrumentos
  - periodo
  - dia_semana
  - forma_pagamento
  - cpf  # UsarÃ¡ RegexEntityExtractor
  - rg   # UsarÃ¡ RegexEntityExtractor
  - nome # UsarÃ¡ DIETClassifier
  - date # UsarÃ¡ Duckling
  - time # UsarÃ¡ Duckling
  - modo_agendamento

slots:
  instrumentos:
    type: list
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: instrumentos
  modo_agendamento:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: modo_agendamento
  nome:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: nome
  cpf:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: cpf
  rg:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: rg
  data_nascimento:
    type: text # Duckling extrai como 'time', mas guardamos como texto para evitar confusÃ£o com 'date' do agendamento
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: date # Assumindo que Duckling pegarÃ¡ isso como 'date'
  data_agendamento:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: date
  hora_agendamento:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: time
  forma_pagamento:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: forma_pagamento

responses:
  utter_saudacao:
  - text: "Miau! ğŸ˜º Tudo certo por aqui! Eu sou o Freddie Meowcury, seu atendente felino da Gato HarmÃ´nicoğŸ¶âœ¨ Na nossa toca vendemos instrumentos, fornecemos aulas e consultorias, e temos materiais incrÃ­veis.\n\nQual serviÃ§o o trouxe atÃ© nossa toca? ğŸ¶"
  utter_agendamento_aula:
  - text: "Miauravilhaaa! ğŸ¸âœ¨ Na Gato HarmÃ´nico, oferecemos aulas para uma miadeira de instrumentos! Temos opÃ§Ãµes em:\n\nInstrumentos de Corda: Guitarras, ViolÃµes, Contrabaixos, Ukuleles, Cavaquinhos, Violinos, Violas e Violoncelos.\nInstrumentos de Sopro: Flautas, Clarinetes, Saxofones, Trompetes, Trombones, Tubas e Gaitas de boca.\nInstrumentos de Teclas: Teclados, Sintetizadores, Pianos, Ã“rgÃ£os e Escaletas.\nInstrumentos de PercussÃ£o: Baterias, Pandeiros, Tamborins, Surdos, Timbas, TriÃ¢ngulos, Kalimbas e Boomwhackers.\n\nVocÃª pode levar seu instrumento ou usar um dos nossos aqui na escola.\nğŸ¹ O valor Ã© de R$ 90,00 por aula, com duraÃ§Ã£o de aproximadamente 1h, ou vocÃª pode fazer o pacote mensal com 4 aulas por R$ 320,00 â€” e ainda recebe um mimo musical surpresa no primeiro mÃªs! ğŸâœ¨\n\nQual [instrumento](instrumentos) vocÃª gostaria de aprender?"
  utter_ask_instrumento_aula:
  - text: "Qual [instrumento](instrumentos) vocÃª gostaria de aprender?"
  utter_agendamento_consultoria:
  - text: "ğŸ¶\nA consultoria musical Ã© tipo um bate-papo cheio de harmonia, onde a gente entende seus objetivos, seu nÃ­vel atual e traÃ§a um caminho musical que seja a sua cara! ğŸ¾âœ¨\nğŸ¯ O investimento Ã© de R$ 120,00 por sessÃ£o, com duraÃ§Ã£o de aproximadamente 1h.\n\nVamos agendar? VocÃª prefere que a consultoria seja [online](modo_agendamento:online) ou [presencial](modo_agendamento:presencial)?"
  utter_compra_instrumento:
  - text: "ğŸ¶ Aqui na GatoHarmÃ´nico temos uma seleÃ§Ã£o de instrumentos que fazem qualquer coraÃ§Ã£o ronronar de emoÃ§Ã£o!\nViolÃµes, ukuleles, teclados, percussÃµesâ€¦ tudo afinadinho, prontinho pra vocÃª tocar suas emoÃ§Ãµes ğŸ’›\nVocÃª jÃ¡ tem um [instrumento](instrumentos) em mente ou quer minha ajudinha felina para informar todos disponiveis?"
  utter_materiais:
  - text: "Miiiiaaaau temos sim! E tem conteÃºdo tÃ£o bom que atÃ© os gatos do bairro andam cantando afinadinho! ğŸ¤ğŸ±âœ¨\n Na Gato HarmÃ´nico, vocÃª pode acessar nossos vÃ­deos, e-books, tutoriais e exercÃ­cios musicais atravÃ©s de dois planos:\n\nğŸ§ Plano Gratuito\n Acesso a uma seleÃ§Ã£o de conteÃºdos educativos\n Com anÃºncios entre as aulas\n Ideal pra quem tÃ¡ comeÃ§ando ou quer experimentar sem compromisso\n ğŸ’° R$ 0,00(gratuito mesmo!)\n\nğŸµ Plano Premium\n Acesso completo a todos os conteÃºdos (inclusive os exclusivos!\n Zero anÃºncios! SÃ³ mÃºsica e aprendizado ğŸ¶\n Materiais bÃ´nus todo mÃªs (tipo playbacks, partituras, desafios interativos)\n Acesso a um grupo VIP de alunos e dicas direto dos nossos professores\n ğŸ’³ R$ 29,90 por mÃªs ou R$ 149,00 no plano semestral (com mimo surpresa no envio! ğŸ)\n\nPara conhecer Ã© sÃ³ acessar nosso link: [LINK SITE]"
  utter_despedida:
  - text: "Eu agradeÃ§o pela sua visita, miauzinho! ğŸ˜¸\n Fico por aqui, afinando meu miado e esperando vocÃª voltar quando quiser.\n Que sua semana seja cheia de harmonia, sorrisos e notas felizes! ğŸ¼ğŸ’›\n AtÃ© a prÃ³xima, com um miado carinhoso e um tchau de patinha! ğŸ‘‹ğŸ¾"
  - text: "Miauâ€¦ Parece que vocÃª foi embora antes de dar tchauzinho! ğŸ˜¸\n Se precisar de algo, estou sempre aqui, pronto para dar aquele miado de ajuda.\n Fica Ã  vontade para voltar quando quiser! Que seu dia seja cheio de melodias felizes e muita inspiraÃ§Ã£o! ğŸ¼ğŸ’›\n AtÃ© a prÃ³xima, com um miado de carinho e uma patinha acenando! ğŸ‘‹ğŸ¾"
  utter_ask_modo_agendamento:
  - text: "Certo! VocÃª prefere que a aula seja [online](modo_agendamento:online) ou [presencial](modo_agendamento:presencial)?"
  utter_ask_dados_pessoais:
  - text: "Perfeito! Para agendar, preciso do seu nome completo, CPF, RG e data de nascimento (xx/xx/xxxx). Pode me passar, por favor?"
  utter_ask_data_hora:
  - text: "Miau! Dados recebidos! Agora, qual a melhor [data](date) e [horÃ¡rio](time) para vocÃª?"
  utter_confirma_agendamento_final:
  - text: "Miauravilha! Agendamento confirmado para {nome}!\nSua aula de {instrumentos} serÃ¡ {modo_agendamento} no dia {data_agendamento} Ã s {hora_agendamento}.\nCPF: {cpf}, RG: {rg}, Nasc.: {data_nascimento}.\nAgora, vamos para o pagamento."
  utter_pagamento:
  - text: "Para finalizar, clique neste link e realize o pagamento: [LINK PAGAMENTO]"
  utter_listagem_instrumentos:
  - text: "Na Gato Harmonicos vendemos\nINSTRUMENTOS DE CORDA\nGuitarras, ViolÃµes, Contrabaixos, Ukuleles, Cavaquinhos, Violinos, Violas e Violoncelos\nINSTRUMENTOS DE SOPRO\nFlautas, Clarinetes, Saxofones, Trompetes, Trombones, Tubas e Gaitas de boca\nINSTRUMENTOS DE TECLAS\nTeclados, Sintetizadores, Pianos, Ã“rgÃ£os e Escaletas\nINSTRUMENTOS DE PERCUSSÃƒO\nBaterias, Pandeiros, Tamborins, Surdos, Timbas, TriÃ¢ngulos, Kalimbas e Boomwhackers\nPara adquirir Ã© sÃ³ entrar neste link e fazer sua compra\n[LINK SITE]"
  utter_ask_modo_consultoria: # <--- NOME ALTERADO
  - text: "Para a consultoria, vocÃª prefere que seja [online](modo_agendamento:online) ou [presencial](modo_agendamento:presencial)?"
  utter_ask_rg:
  - text: "Entendido. E qual o seu RG?"
  utter_ask_cpf:
  - text: "Ok. E o CPF?"
  utter_ask_data_nascimento:
  - text: "Certo. E a data de nascimento (xx/xx/xxxx)?"
  utter_ask_nome:
  - text: "Qual o seu nome completo?"
  utter_default:
  - text: "Miau... Desculpe, nÃ£o entendi muito bem. Poderia repetir de outra forma?"
  utter_inactivity_reminder: # <--- ADICIONE ESTA RESPOSTA
  - text: "Miau! ğŸ˜¸ Parece que vocÃª deu uma sumidinha. Ainda precisa da minha ajuda felina por aqui? ğŸ¾"

actions:
  - action_schedule_inactivity_reminder
  - action_react_to_inactivity_reminder
  - utter_saudacao
  - utter_agendamento_aula
  - utter_agendamento_consultoria
  - utter_compra_instrumento
  - utter_materiais
  - utter_despedida
  - utter_ask_modo_agendamento
  - utter_ask_dados_pessoais
  - utter_ask_data_hora
  - utter_confirma_agendamento_final
  - utter_pagamento
  - utter_listagem_instrumentos
  - utter_ask_instrumento_aula
  - utter_ask_modo_consultoria # Use o nome que vocÃª decidiu
  - utter_ask_rg
  - utter_ask_cpf
  - utter_ask_data_nascimento
  - utter_ask_nome
  - utter_default

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true